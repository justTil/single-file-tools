<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>README Markdown Editor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f3f4f6;
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            font-size: 1.875rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 2rem;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        @media (min-width: 768px) {
            .grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .panel {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
        }

        h2 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 1rem;
        }

        textarea {
            width: 100%;
            height: 600px;
            padding: 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.875rem;
            resize: vertical;
            line-height: 1.5;
        }

        textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .preview {
            min-height: 600px;
            padding: 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            background-color: #f9fafb;
            overflow-wrap: break-word;
            line-height: 1.6;
        }

        .preview h1 {
            font-size: 2rem;
            margin-top: 0;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .preview h2 {
            font-size: 1.5rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            padding-bottom: 0.3rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .preview h3 {
            font-size: 1.25rem;
            margin-top: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .preview h4 {
            font-size: 1rem;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        .preview h5 {
            font-size: 0.875rem;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        .preview h6 {
            font-size: 0.75rem;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            color: #6b7280;
        }

        .preview p {
            margin-bottom: 1rem;
        }

        .preview ul,
        .preview ol {
            margin-bottom: 1rem;
            padding-left: 2rem;
        }

        .preview li {
            margin-bottom: 0.25rem;
        }

        .preview code {
            background-color: #f3f4f6;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.875rem;
            color: #ef4444;
        }

        .preview pre {
            background-color: #1f2937;
            color: #f3f4f6;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin-bottom: 1rem;
        }

        .preview pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
        }

        .preview blockquote {
            border-left: 4px solid #d1d5db;
            padding-left: 1rem;
            margin: 1rem 0;
            color: #6b7280;
            font-style: italic;
        }

        .preview a {
            color: #3b82f6;
            text-decoration: underline;
        }

        .preview a:hover {
            color: #2563eb;
        }

        .preview img {
            max-width: 100%;
            height: auto;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }

        .preview table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 1rem;
        }

        .preview th,
        .preview td {
            border: 1px solid #d1d5db;
            padding: 0.5rem;
            text-align: left;
        }

        .preview th {
            background-color: #f3f4f6;
            font-weight: 600;
        }

        .preview hr {
            border: none;
            border-top: 1px solid #e5e7eb;
            margin: 1.5rem 0;
        }

        .preview strong {
            font-weight: 600;
        }

        .preview em {
            font-style: italic;
        }

        .preview del {
            text-decoration: line-through;
        }

        .placeholder {
            color: #9ca3af;
            font-style: italic;
        }

        .toolbar {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.5rem 0.75rem;
            background-color: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.15s;
        }

        .btn:hover {
            background-color: #e5e7eb;
        }

        .btn:active {
            background-color: #d1d5db;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>README Markdown Editor</h1>

        <div class="grid">
            <!-- Left side - Editor -->
            <div class="panel">
                <h2>Markdown</h2>
                <div class="toolbar">
                    <button class="btn" onclick="insertMarkdown('# ', '')">H1</button>
                    <button class="btn" onclick="insertMarkdown('## ', '')">H2</button>
                    <button class="btn" onclick="insertMarkdown('### ', '')">H3</button>
                    <button class="btn" onclick="insertMarkdown('**', '**')">Bold</button>
                    <button class="btn" onclick="insertMarkdown('*', '*')">Italic</button>
                    <button class="btn" onclick="insertMarkdown('`', '`')">Code</button>
                    <button class="btn" onclick="insertMarkdown('[', '](url)')">Link</button>
                    <button class="btn" onclick="insertMarkdown('- ', '')">List</button>
                    <button class="btn" onclick="insertMarkdown('```\n', '\n```')">Code Block</button>
                </div>
                <textarea id="markdownInput" placeholder="# README

## Description
Write your markdown here...

## Features
- Feature 1
- Feature 2

## Installation
```bash
npm install
```

## Usage
```javascript
const app = require('app');
```
"></textarea>
            </div>

            <!-- Right side - Preview -->
            <div class="panel">
                <h2>Preview</h2>
                <div id="preview" class="preview">
                    <div class="placeholder">Start typing markdown to see the preview</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function parseMarkdown(markdown) {
            let html = markdown;

            // Code blocks (must be first to avoid processing code)
            html = html.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, lang, code) => {
                return `<pre><code>${escapeHtml(code.trim())}</code></pre>`;
            });

            // Inline code
            html = html.replace(/`([^`]+)`/g, '<code>$1</code>');

            // Headers
            html = html.replace(/^### (.+)$/gm, '<h3>$1</h3>');
            html = html.replace(/^## (.+)$/gm, '<h2>$1</h2>');
            html = html.replace(/^# (.+)$/gm, '<h1>$1</h1>');
            html = html.replace(/^#### (.+)$/gm, '<h4>$1</h4>');
            html = html.replace(/^##### (.+)$/gm, '<h5>$1</h5>');
            html = html.replace(/^###### (.+)$/gm, '<h6>$1</h6>');

            // Bold
            html = html.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
            html = html.replace(/__(.+?)__/g, '<strong>$1</strong>');

            // Italic
            html = html.replace(/\*(.+?)\*/g, '<em>$1</em>');
            html = html.replace(/_(.+?)_/g, '<em>$1</em>');

            // Strikethrough
            html = html.replace(/~~(.+?)~~/g, '<del>$1</del>');

            // Links
            html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2">$1</a>');

            // Images
            html = html.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, '<img src="$2" alt="$1">');

            // Horizontal rules
            html = html.replace(/^---$/gm, '<hr>');
            html = html.replace(/^\*\*\*$/gm, '<hr>');

            // Blockquotes
            html = html.replace(/^> (.+)$/gm, '<blockquote>$1</blockquote>');

            // Lists
            const lines = html.split('\n');
            let inList = false;
            let listType = null;
            let result = [];

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                const ulMatch = line.match(/^[\*\-\+] (.+)/);
                const olMatch = line.match(/^\d+\. (.+)/);

                if (ulMatch) {
                    if (!inList || listType !== 'ul') {
                        if (inList) result.push(`</${listType}>`);
                        result.push('<ul>');
                        listType = 'ul';
                        inList = true;
                    }
                    result.push(`<li>${ulMatch[1]}</li>`);
                } else if (olMatch) {
                    if (!inList || listType !== 'ol') {
                        if (inList) result.push(`</${listType}>`);
                        result.push('<ol>');
                        listType = 'ol';
                        inList = true;
                    }
                    result.push(`<li>${olMatch[1]}</li>`);
                } else {
                    if (inList) {
                        result.push(`</${listType}>`);
                        inList = false;
                        listType = null;
                    }
                    result.push(line);
                }
            }

            if (inList) {
                result.push(`</${listType}>`);
            }

            html = result.join('\n');

            // Tables (basic support)
            html = html.replace(/\|(.+)\|\n\|[-: |]+\|\n((?:\|.+\|\n?)+)/g, (match, header, rows) => {
                const headers = header.split('|').filter(h => h.trim()).map(h => `<th>${h.trim()}</th>`).join('');
                const rowsHtml = rows.trim().split('\n').map(row => {
                    const cells = row.split('|').filter(c => c.trim()).map(c => `<td>${c.trim()}</td>`).join('');
                    return `<tr>${cells}</tr>`;
                }).join('');
                return `<table><thead><tr>${headers}</tr></thead><tbody>${rowsHtml}</tbody></table>`;
            });

            // Paragraphs
            html = html.replace(/^(?!<[huplto]|<\/|<pre|<blockquote)(.+)$/gm, '<p>$1</p>');

            // Clean up empty paragraphs
            html = html.replace(/<p><\/p>/g, '');
            html = html.replace(/<p>\s*<\/p>/g, '');

            return html;
        }

        function updatePreview() {
            const input = document.getElementById('markdownInput');
            const preview = document.getElementById('preview');
            const markdown = input.value.trim();

            if (!markdown) {
                preview.innerHTML = '<div class="placeholder">Start typing markdown to see the preview</div>';
                return;
            }

            const html = parseMarkdown(markdown);
            preview.innerHTML = html;
        }

        function insertMarkdown(before, after) {
            const textarea = document.getElementById('markdownInput');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            const beforeText = textarea.value.substring(0, start);
            const afterText = textarea.value.substring(end);

            textarea.value = beforeText + before + selectedText + after + afterText;

            // Set cursor position
            const newCursorPos = start + before.length + selectedText.length;
            textarea.setSelectionRange(newCursorPos, newCursorPos);
            textarea.focus();

            updatePreview();
        }

        document.getElementById('markdownInput').addEventListener('input', updatePreview);

        // Initial render
        updatePreview();
    </script>
</body>

</html>